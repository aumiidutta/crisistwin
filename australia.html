<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            Crisistwin
        </title>
        <link rel="stylesheet" href="style.css">
    </head>


    <body>
        <div class="bar"></div>
        <nav class="navbar">
            <a href="https://aumiidutta.github.io/crisistwin/"><p>Home</p></a>
        </nav>
        <div class="bar"></div>


        <main>
            <h1>Oceania / Australia Region</h1>
            <div class="country-search">
                <input id="country-filter" type="text" placeholder="Filter countries or helpline keyword..." aria-label="Filter countries">
                <span id="filter-stats" aria-live="polite"></span>
            </div>
            <p id="countries-count"></p>
            <div class="country-grid" id="country-grid"></div>
            <script id="continent-data" type="application/json">{
                "continent": "Oceania",
                "updated": "2025-10-08",
                "countries": [
                    {"name": "Australia","iso2": "AU","isd": "+61","capital": "Canberra","currency":"AUD","languages":["English"],"helplines": {
                        "general_emergency": "000",
                        "mobile_emergency": "112",
                        "text_emergency_tty": "106",
                        "police_non_emergency": "131 444",
                        "state_emergency_service": "132 500",
                        "health_advice_non_emergency": "1800 022 222",
                        "poisons_information_centre": "13 11 26",
                        "suicide_crisis_support_lifeline": "13 11 14",
                        "national_security": "1800 123 400",
                        "crime_stoppers": "1800 333 000"
                    }},

                    {"name": "Fiji","iso2": "FJ","isd": "+679","capital": "Suva","currency":"FJD","languages":["English","Fijian","Fiji Hindi"],"helplines": {
                        "emergency": "911",
                        "police": "917",
                        "fire": "910",
                        "disaster_management": "915",
                        "search_and_rescue": "915",
                        "crime_stoppers": "919"
                    }},

                    {"name": "New Zealand","iso2": "NZ","isd": "+64","capital": "Wellington","currency":"NZD","languages":["English","Māori","NZ Sign Language"],"helplines": {"emergency": "111","healthline": "0800 611 116","lifeline": "0800 543 354"}},
                    
                    {"name": "Papua New Guinea","iso2": "PG","isd": "+675","capital": "Port Moresby","currency":"PGK","languages":["Tok Pisin","Hiri Motu","English"],"helplines": {"police": "112","ambulance": "111","fire": "110"}}
                ]
            }</script>
            <script>
            (function(){
                const raw = document.getElementById('continent-data').textContent.trim();
                let data; try { data = JSON.parse(raw); } catch(e){ console.error('Invalid JSON', e); return; }
                const grid = document.getElementById('country-grid');
                const countEl = document.getElementById('countries-count');
                const filterInput = document.getElementById('country-filter');
                const filterStats = document.getElementById('filter-stats');
                function render(list){
                    grid.innerHTML='';
                    list.forEach(c => {
                        const card = document.createElement('article');
                        card.className = 'country-card';
                        const helplines = Object.entries(c.helplines).map(([k,v]) => '<li><strong>' + k.replace(/_/g,' ') + ':</strong> ' + v + '</li>').join('');
                            const flagUrl = 'https://flagcdn.com/w40/' + c.iso2.toLowerCase() + '.png';
                            card.innerHTML = '\n<h2><img class="country-flag" src="' + flagUrl + '" alt="' + c.name + ' flag">' + c.name + '</h2>' +
                                '\n<p><strong>Capital:</strong> ' + c.capital + '</p>' +
                                '\n<p><strong>Official language(s):</strong> ' + (c.languages? c.languages.join(', ') : '') + '</p>' +
                                '\n<p><strong>ISD:</strong> ' + c.isd + '</p>' +
                                '\n<p><strong>Currency:</strong> ' + (c.currency||'') + '</p>' +
                                '\n<ul class="helplines">' + helplines + '</ul>';
                        grid.appendChild(card);
                    });
                }
                countEl.textContent = 'Countries listed: ' + data.countries.length;
                render(data.countries);
                filterInput.addEventListener('input', () => {
                    const q = filterInput.value.trim().toLowerCase();
                    if(!q){ render(data.countries); filterStats.textContent=''; return; }
                    const filtered = data.countries.filter(c => c.name.toLowerCase().includes(q) || c.capital.toLowerCase().includes(q) || (c.languages && c.languages.some(l => l.toLowerCase().includes(q))) || Object.entries(c.helplines).some(([k,v]) => k.toLowerCase().includes(q) || String(v).toLowerCase().includes(q)) );
                    render(filtered);
                    filterStats.textContent = filtered.length + ' / ' + data.countries.length + ' match';
                });
            })();
            </script>
        </main>
        <section class="footer">
            © 2025 Crisistwin <a href="contribute.html">Learn more</a>
        </section>
    </body>
</html>